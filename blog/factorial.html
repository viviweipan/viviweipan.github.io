<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>Projects</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Pan (Vivi) Wei">
                <meta name="msvalidate.01" content="305CD82AE65FC4C9597F80416C1271B7" />
		<link rel='stylesheet' media='screen' href='/static/css/base.css' />
        <link rel='stylesheet' media='screen' href='/static/css/index.css' />
		<link rel='stylesheet' media='screen' href='/static/css/papers.css' />
        <link rel='stylesheet' media='screen' href='/static/css/projects.css' />
        <link rel='stylesheet' media='screen' href='/static/css/recipes.css' />

        <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,400italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Roboto:300,300italic,100italic,100,500' rel='stylesheet' type='text/css'>

        <meta name="description" content="">

	</head>

	<body>
		<div class=top>
			<ul class="nav">
                <a href="/"><li>home</li></a>
                <a href="/projects/"><li>projects</li></a>
                <a href="/publications/"><li>publications</li></a>
                <a href="/blog/"><li>blog</li></a>
				<a href="/resume/Pan_Wei_CV.pdf"><li>résumé</li></a>
			</ul>
			<div class=break></div>
			
			<div class=break></div>
		</div>
		
        <div class="main markdown">
        <style>
        #ponies img, #external img{
        display:inline;
        }
        </style>
            <h3>How many ways we can do factorial in python?</h3>
            <p>The short answer is I found five ways, and the first way I would like to show here is the classical recursive way:</p>
            <pre><code>
def factorial_recursive(n):
    if n == 0:
        return 1
    else:
        return n*factorial_recursive(n-1)
            </code></pre>

        <p>This way is not the best approach. If n is large is enough, it will give runtime error.</p>
        <p>A better way is to do it iteratively as following: </p>
        <pre><code>
def factorial_iterative(n):
    result = 1
    if n == 0:
        return result
    else:
        for i in range(1,n+1):
            result *= i
    return result
        </code></pre>
        <p>Although python does not support TCO (Tail Call Optimization), we still can write it in TCO way:</p>
        <pre><code>
def factorial_tail(n):
    return factorial_internal(n, 1)
def factorial_internal(n, accumulator=1):
    if n == 0:
        return accumulator
    else:
        return factorial_internal(n-1, n*accumulator)
        </code></pre>
        <p>We can also do it in a middle point way:</p>
        <pre><code>
def factorial_half(n):
    return factorial_internal(1, n)

def factorial_internal(start, end):
    if end == 0:
        return 1
    if start == end:
        return start
    else:
        mid = (start + end) //2
        return factorial_internal(start, mid)*factorial_internal(mid+1, end)
        </code></pre>

        <p>Of course, python has it factorial function</p>
        <pre><code>
import math
math.factorial(n)
        </code></pre>
        <p>You can find the implementation in <a href="https://hg.python.org/cpython/file/7937aa6b7e92/Modules/mathmodule.c#l1218">C code</a></p>
        <p>Also python2* and python3* have different ways of implementing factorial, see <a href="https://stackoverflow.com/questions/9815252/why-is-math-factorial-much-slower-in-python-2-x-than-3-x">post</a>.</p>

    </div>
	</body>
</html>